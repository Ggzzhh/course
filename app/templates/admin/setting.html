{% extends 'admin/frm_base.html' %}
{% block _head %}
  <style>
    .setting {
      width: 50%;
      font-weight: 700;
    }
  </style>
{% endblock %}
{% block content_body %}
  <div class="frm-container">
    <div class="frm-content">
      <div class="setting">
        <div class="form-group">
          <label for="">修改管理员密码</label>
          <input type="password" name="newPassword" class="form-control" required placeholder="新密码">
        </div>
        <div class="form-group">
          <button class="btn btn-primary" type="button" id="updatePassword">保存</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
{% block _scripts %}
  <script>
    $(document).ready(function () {
        $('#updatePassword').click(function () {
            let pwd = $('input[name="newPassword"]').val();
            if (pwd != null)
              a_json(
                  '{{ url_for("api.update_admin_pwd") }}',
                  'UPDATE',
                  JSON.stringify({password: pwd})
              )
        });
    })
  </script>
{% endblock %}